<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Prometric Nurse Technician – Actual Simulation Exam</title>

<style>
body { font-family: Arial, sans-serif; margin: 20px; }
h1, h2 { margin-bottom: 5px; }
.small { font-size: 0.9em; color: #555; }
.box { border: 1px solid #ccc; padding: 15px; margin: 15px 0; }
.option { margin: 8px 0; }
button { padding: 10px 16px; margin-top: 15px; }
#exam, #dashboard { display: none; }
.safe { color: #006400; font-weight: bold; }
.unsafe { color: #b00020; font-weight: bold; }
table { width:100%; border-collapse:collapse; margin-top:10px; }
th,td { border:1px solid #ccc; padding:8px; vertical-align:top; }
th { background:#f0f0f0; }
</style>
</head>

<body oncontextmenu="return false;">

<!-- ================= INTRO SCREEN ================= -->
<div id="intro">

<h1>Prometric Nurse Technician – Actual Simulation Exam</h1>

<p><strong>Focus:</strong> Safety • ABC • Scope • Immediate Action</p>

<div class="box">
<strong>Coverage confirmation:</strong><br>
| Airway & oxygenation |
Circulation & shock |
Medication safety |
Infection control |
Scope of practice |
Documentation / delay traps |
Authority bias |
</div>

<p class="unsafe"><strong>“Sounds smart but unsafe” answers are intentionally included.</strong></p>

<p>
This is no longer “just a test”.<br>
<strong>It is a Prometric elimination simulator.</strong>
</p>

<div class="box">
<label><strong>Enter your name:</strong></label><br>
<input type="text" id="candidateName" placeholder="Your name only" style="width:300px;">
</div>

<button onclick="startExam()">Start Exam</button>

</div>

<!-- ================= EXAM ================= -->
<div id="exam">

<h2 id="qTitle"></h2>
<p id="qText"></p>
<div id="options"></div>

<button onclick="nextQuestion()">Next</button>

</div>

<!-- ================= INSTRUCTOR DASHBOARD ================= -->
<div id="dashboard">

<h1>Instructor Rationale Dashboard</h1>

<p><strong>Candidate:</strong> <span id="nameOut"></span></p>

<ul>
  <li><strong>Unsafe Decisions:</strong> <span id="unsafeCount"></span></li>
  <li><strong>Gatekeeper Failure:</strong> <span id="gateFail"></span></li>
  <li><strong>Final Risk:</strong> <span id="riskText" class="unsafe"></span></li>
</ul>

<h2>Item-by-Item Safety Rationale</h2>
<div id="rationaleContainer"></div>

<button onclick="toggleDashboard()">Return to Exam</button>

</div>

<script>
/* ================= STATE ================= */
let current = 0;
let unsafeCount = 0;
let failedGatekeeper = false;
let mode = "intro";
let candidateName = "";
let responses = [];

/* ================= QUESTIONS (SAMPLE – EXTEND TO 100) ================= */
const questions = [
{
  title: "Item 1 (Gatekeeper – Airway)",
  text: "Patient suddenly becomes cyanotic with SpO₂ 82%.",
  gatekeeper: true,
  correctRationale:
    "Low oxygen saturation with cyanosis indicates acute hypoxia. Immediate airway and oxygen intervention is required to prevent respiratory failure.",
  prometricTarget:
    "Tests ABC priority and immediate nurse action without delay.",
  options: [
    { text:"Document the finding", unsafeType:"Delay Action",
      rationale:"Documentation delays a life-saving intervention." },
    { text:"Notify physician", unsafeType:"Authority Bias",
      rationale:"Waiting for orders delays immediate airway management." },
    { text:"Apply oxygen and assess airway", correct:true },
    { text:"Reassure the patient", unsafeType:"False Reassurance",
      rationale:"Minimizes a critical oxygenation emergency." }
  ]
},
{
  title: "Item 2 (Circulation / Fall Risk)",
  text: "Patient reports dizziness when standing from bed.",
  gatekeeper:false,
  correctRationale:
    "Dizziness may indicate orthostatic hypotension. Sitting the patient and assessing vitals prevents falls and injury.",
  prometricTarget:
    "Tests safety-first positioning and assessment.",
  options: [
    { text:"Assist patient to sit and assess vital signs", correct:true },
    { text:"Encourage patient to walk it off", unsafeType:"Ignore Safety",
      rationale:"Increases fall risk." },
    { text:"Document and continue care", unsafeType:"Delay Action",
      rationale:"Fails to address immediate danger." },
    { text:"Wait for provider instruction", unsafeType:"Authority Bias",
      rationale:"Unnecessary delay of nursing action." }
  ]
}

/* ➕ Add items 3–100 using same structure */
];

/* ================= FLOW ================= */
function startExam() {
  const nameInput = document.getElementById("candidateName").value.trim();
  if (!nameInput) return alert("Please enter your name.");
  candidateName = nameInput;
  document.getElementById("intro").style.display = "none";
  document.getElementById("exam").style.display = "block";
  mode = "exam";
  renderQuestion();
}

function renderQuestion() {
  const q = questions[current];
  qTitle.innerText = q.title;
  qText.innerText = q.text;
  options.innerHTML = "";
  q.options.forEach((o,i)=>{
    options.innerHTML += `
      <div class="option">
        <label>
          <input type="radio" name="opt" value="${i}"> ${o.text}
        </label>
      </div>`;
  });
}

function nextQuestion() {
  const sel = document.querySelector('input[name="opt"]:checked');
  if(!sel) return alert("Select an answer");

  const q = questions[current];
  const c = q.options[sel.value];

  responses.push({
    title:q.title,
    scenario:q.text,
    correctRationale:q.correctRationale,
    prometricTarget:q.prometricTarget,
    selected:c.text,
    correct:!!c.correct,
    unsafeType:c.unsafeType||null,
    unsafeRationale:c.rationale||null
  });

  if(!c.correct){
    unsafeCount++;
    if(q.gatekeeper) failedGatekeeper = true;
  }

  current++;
  if(current < questions.length) renderQuestion();
  else alert("Exam complete");
}

/* ================= DASHBOARD ================= */
function toggleDashboard(){
  if(mode==="exam"){
    if(prompt("Instructor password:")!=="SAFE123") return;
    showDashboard(); mode="dashboard";
  } else { showExam(); mode="exam"; }
}

function showDashboard(){
  exam.style.display="none";
  dashboard.style.display="block";
  nameOut.innerText = candidateName;
  unsafeCount.innerText = unsafeCount;
  gateFail.innerText = failedGatekeeper ? "YES – AUTO FAIL" : "NO";
  riskText.innerText =
    failedGatekeeper ? "AUTO FAIL – PATIENT SAFETY VIOLATION" :
    unsafeCount>=2 ? "HIGH RISK – UNSAFE JUDGMENT PATTERN" :
    unsafeCount===1 ? "MODERATE RISK – REVIEW REQUIRED" :
    "LOW RISK";

  rationaleContainer.innerHTML="";
  responses.forEach(r=>{
    rationaleContainer.innerHTML += `
      <h3>${r.title}</h3>
      <p><strong>Scenario:</strong> ${r.scenario}</p>
      <p class="safe"><strong>Correct Rationale:</strong> ${r.correctRationale}</p>
      <p><strong>Selected:</strong> ${r.selected}</p>
      ${r.correct
        ? `<p class="safe">Correct – safe judgment.</p>`
        : `<p class="unsafe"><strong>Unsafe:</strong> ${r.unsafeType}<br>
           ${r.unsafeRationale}</p>`}
      <p><strong>Prometric Target:</strong> ${r.prometricTarget}</p>
      <hr>`;
  });
}

function showExam(){
  dashboard.style.display="none";
  exam.style.display="block";
}

/* SECRET INSTRUCTOR KEY */
document.addEventListener("keydown",e=>{
  if(e.ctrlKey && e.shiftKey && e.key==="D") toggleDashboard();
});
</script>

</body>
</html>
